<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>Event Feedback</title>

    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">

    <style>
        body {
            background: linear-gradient(135deg, #f8fafc, #e2e8f0);
        }
        .event-title {
            font-weight: 700;
        }
        .feedback-card {
            border-radius: 14px;
            border: none;
        }
        .star {
            color: #facc15;
            font-size: 1.1rem;
        }
        .submit-card {
            border-radius: 16px;
            border: none;
            background: linear-gradient(135deg, #4f46e5, #6366f1);
            color: white;
        }
        .submit-card textarea,
        .submit-card input {
            border-radius: 10px;
        }
        .btn-submit {
            background: white;
            color: #4f46e5;
            font-weight: 600;
            border-radius: 12px;
        }
    </style>
</head>

<body>

<div class="container py-5">

    <!-- Event Title -->
    <div class="text-center mb-5">
        <h2 class="event-title" th:text="${event.title}"></h2>
        <p class="text-muted">What people are saying about this event</p>
    </div>

    <!-- Feedback List -->
    <div class="row g-4 mb-5">
        <div class="col-md-6"
             th:each="fb : ${feedbacks}">
            <div class="card feedback-card shadow-sm p-3 h-100">
                <div class="mb-2">
                    <span class="star">⭐</span>
                    <span class="fw-semibold" th:text="${fb.rating}"></span>
                    <span class="text-muted">/ 5</span>
                </div>

                <p class="mb-2" th:text="${fb.comment}"></p>

                <small class="text-muted">
                    — <span th:text="${fb.user.name}"></span>
                </small>
            </div>
        </div>
    </div>

    <!-- Submit Feedback -->
    <div class="row justify-content-center">
        <div class="col-lg-8">

            <div class="card submit-card shadow-lg p-4">
                <h4 class="text-center mb-3">Share Your Experience ✨</h4>
                <p class="text-center opacity-75 mb-4">
                    Your feedback helps improve future events
                </p>

                <form th:action="@{/events/{id}/feedback(id=${event.id})}" method="post">

                    <div class="mb-3">
                        <label class="form-label">Rating (1–5)</label>
                        <input type="number"
                               name="rating"
                               min="1"
                               max="5"
                               class="form-control"
                               placeholder="Give a rating"
                               required />
                    </div>

                    <div class="mb-4">
                        <label class="form-label">Your Feedback</label>
                        <textarea name="comment"
                                  class="form-control"
                                  rows="4"
                                  placeholder="Write your thoughts about the event..."
                                  required></textarea>
                    </div>

                    <button type="submit" class="btn btn-submit w-100 py-2">
                        Submit Feedback ⭐
                    </button>

                </form>
            </div>

        </div>
    </div>

</div>

</body>
</html>
