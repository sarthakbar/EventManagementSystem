<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>Event Discussion</title>

    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">

    <style>
        body {
            background: linear-gradient(135deg, #f1f5f9, #e2e8f0);
        }
        .forum-card {
            border-radius: 16px;
            border: none;
        }
        .comment-bubble {
            border-radius: 14px;
            background: #ffffff;
        }
        .avatar {
            width: 42px;
            height: 42px;
            border-radius: 50%;
            background: #6366f1;
            color: white;
            font-weight: 600;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        .post-box {
            border-radius: 16px;
            background: linear-gradient(135deg, #4f46e5, #6366f1);
            color: white;
        }
        textarea {
            border-radius: 12px;
        }
        .btn-post {
            background: white;
            color: #4f46e5;
            font-weight: 600;
            border-radius: 12px;
        }
    </style>
</head>

<body>

<div class="container py-5">

    <!-- Event Title -->
    <div class="text-center mb-4">
        <h2 class="fw-bold" th:text="${event.title}"></h2>
        <p class="text-muted">Join the discussion and share your thoughts</p>
    </div>

    <!-- Discussion Card -->
    <div class="card forum-card shadow-sm p-4 mb-5">

        <h4 class="mb-4">Discussion Forum üí¨</h4>

        <!-- Comments -->
        <div class="d-flex flex-column gap-3">
            <div class="d-flex gap-3"
                 th:each="comment : ${comments}">
                
                <!-- Avatar -->
                <div class="avatar">
                    <span th:text="${#strings.substring(comment.user.name,0,1)}"></span>
                </div>

                <!-- Message -->
                <div class="comment-bubble p-3 shadow-sm w-100">
                    <div class="fw-semibold mb-1"
                         th:text="${comment.user.name}"></div>
                    <div th:text="${comment.message}"></div>
                </div>
            </div>
        </div>

    </div>

    <!-- Post Comment -->
    <div class="row justify-content-center">
        <div class="col-lg-8">

            <div class="card post-box shadow-lg p-4">
                <h5 class="text-center mb-3">Post a Comment ‚úçÔ∏è</h5>

                <form th:action="@{/events/{id}/forum(id=${event.id})}" method="post">

                    <div class="mb-3">
                        <textarea name="message"
                                  class="form-control"
                                  rows="4"
                                  placeholder="Write your comment here..."
                                  required></textarea>
                    </div>

                    <button type="submit" class="btn btn-post w-100 py-2">
                        Post Comment üöÄ
                    </button>

                </form>
            </div>

        </div>
    </div>

</div>

</body>
</html>
